<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>About Me</title>

        <link
            href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600&display=swap"
            rel="stylesheet"
        />

        <style>
            * {
                box-sizing: border-box;
            }

            :root {
                --text: #cad3f5;
                --subtext1: #b5bfe2;
                --subtext0: #a5adce;
                --surface0: #414559;
                --base: #303446;
                --mantle: #292c3c;
                --crust: #232634;
                --red: #e78284;
                --blue: #8caaee;
            }

            body {
                margin: 0;
                height: 100vh;
                font-family: "JetBrains Mono", monospace;
                color: var(--text);
                overflow: hidden;
                background:
                    radial-gradient(
                        circle at 20% 20%,
                        var(--surface0) 0%,
                        transparent 40%
                    ),
                    radial-gradient(
                        circle at 80% 60%,
                        var(--mantle) 0%,
                        transparent 50%
                    ),
                    var(--crust);
            }

            /* ================= BOOT SCREEN ================= */

            .boot-screen {
                position: fixed;
                inset: 0;
                background: #000;
                color: var(--text);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 24px;
                z-index: 5000;
                font-size: 14px;
            }

            .boot-screen.hidden {
                display: none;
            }

            .boot-logo {
                width: 120px;
                height: 120px;
                object-fit: contain;
                opacity: 0.9;
            }

            .boot-text {
                opacity: 0.7;
            }

            /* ================= MENU BAR ================= */

            .menu-bar {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 28px;
                background: rgba(41, 44, 60, 0.85);
                backdrop-filter: blur(6px);
                border-bottom: 1px solid var(--surface0);
                display: flex;
                align-items: center;
                padding: 0 12px;
                font-size: 12px;
                z-index: 1000;
            }

            .menu-right {
                margin-left: auto;
                opacity: 0.75;
            }

            /* ================= DESKTOP ================= */

            .desktop {
                position: absolute;
                inset: 28px 0 0 0;
                padding: 18px;
                display: grid;
                grid-template-columns: repeat(auto-fill, 90px);
                gap: 18px;
            }

            .icon {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 6px;
            }

            .icon .symbol {
                font-size: 34px;
            }
            .icon .label {
                font-size: 12px;
                color: var(--subtext0);
            }

            /* ================= GENERIC WINDOW ================= */

            .window {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 700px;
                height: 420px;
                background: #24273a;
                border-radius: 10px;
                box-shadow:
                    0 0 0 1px var(--surface0),
                    0 20px 60px rgba(0, 0, 0, 0.6);
                display: flex;
                flex-direction: column;
                overflow: hidden;
                z-index: 500;
            }

            .window.hidden {
                display: none;
            }

            .window-header {
                height: 38px;
                background: var(--base);
                display: flex;
                align-items: center;
                padding: 0 14px;
                gap: 8px;
                border-bottom: 1px solid var(--surface0);
                cursor: grab;
            }

            .window-body {
                flex: 1;
                overflow: auto;
                padding: 16px;
            }

            .dot {
                width: 12px;
                height: 12px;
                border-radius: 50%;
                cursor: pointer;
            }
            .dot.red {
                background: var(--red);
            }

            /* ================= FILE MANAGER ================= */

            .file-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, 90px);
                gap: 16px;
            }
            .file-item {
                display: flex;
                flex-direction: column;
                align-items: center;
                cursor: pointer;
            }
            .file-item span {
                font-size: 12px;
                color: var(--subtext1);
            }
            .path-bar {
                font-size: 12px;
                margin-bottom: 10px;
                color: var(--subtext0);
            }
            button.nav {
                margin-bottom: 12px;
                background: var(--base);
                border: none;
                color: var(--text);
                padding: 6px 10px;
                border-radius: 6px;
                cursor: pointer;
            }

            /* ================= TERMINAL ================= */

            .terminal-body {
                padding: 22px;
                overflow-y: auto;
                line-height: 1.6;
                font-size: 14px;
            }
            .line {
                display: flex;
                gap: 8px;
            }
            .prompt {
                color: var(--blue);
            }
            input {
                background: transparent;
                border: none;
                outline: none;
                color: var(--text);
                font-family: inherit;
                width: 100%;
            }
        </style>
    </head>

    <body>
        <div class="boot-screen" id="bootScreen">
            <img src="onion.png" class="boot-logo" />
            <div class="boot-text" id="bootText">initializing ledgerOS...</div>
        </div>

        <div class="menu-bar">
            <span>ledgerOS</span>
            <div class="menu-right" id="clock"></div>
        </div>

        <div class="desktop" id="desktop" style="visibility: hidden">
            <div class="icon" id="terminalIcon">
                <div class="symbol">üñ•Ô∏è</div>
                <div class="label">terminal</div>
            </div>
            <div class="icon" id="fileManagerIcon">
                <div class="symbol">üìÅ</div>
                <div class="label">file manager</div>
            </div>
        </div>

        <div class="window hidden" id="terminalWindow">
            <div class="window-header" data-drag>
                <div class="dot red" data-close="terminalWindow"></div>
            </div>
            <div class="window-body terminal-body" id="terminal"></div>
        </div>

        <div class="window hidden" id="fileManagerWindow">
            <div class="window-header" data-drag>
                <div class="dot red" data-close="fileManagerWindow"></div>
            </div>
            <div class="window-body">
                <button class="nav" id="backBtn">‚óÄ back</button>
                <div class="path-bar" id="pathBar"></div>
                <div class="file-grid" id="fileGrid"></div>
            </div>
        </div>

        <script>
            /* ================= BOOT ================= */

            const bootScreen = document.getElementById("bootScreen");
            const desktop = document.getElementById("desktop");
            const bootText = document.getElementById("bootText");

            async function bootSequence() {
                await wait(800);
                bootText.textContent = "loading system modules...";
                await wait(900);
                bootText.textContent = "mounting filesystem...";
                await wait(900);
                bootText.textContent = "establishing observer context...";
                await wait(900);
                bootScreen.classList.add("hidden");
                desktop.style.visibility = "visible";
            }
            function wait(ms) {
                return new Promise((r) => setTimeout(r, ms));
            }
            bootSequence();

            /* ================= CLOCK ================= */
            function isoNow() {
                const d = new Date();
                return `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, "0")}-${String(d.getDate()).padStart(2, "0")} ${String(d.getHours()).padStart(2, "0")}:${String(d.getMinutes()).padStart(2, "0")}:${String(d.getSeconds()).padStart(2, "0")}`;
            }
            setInterval(() => (clock.textContent = isoNow()), 1000);

            /* ================= WINDOW SYSTEM ================= */
            const menuBar = document.querySelector(".menu-bar");
            function makeDraggable(win) {
                const header = win.querySelector("[data-drag]");
                let drag = false,
                    ox = 0,
                    oy = 0;
                header.onmousedown = (e) => {
                    drag = true;
                    const r = win.getBoundingClientRect();
                    win.style.transform = "none";
                    win.style.left = r.left + "px";
                    win.style.top = r.top + "px";
                    ox = e.clientX - r.left;
                    oy = e.clientY - r.top;
                };
                document.onmousemove = (e) => {
                    if (!drag) return;
                    const w = win.offsetWidth;
                    const h = win.offsetHeight;
                    let x = e.clientX - ox;
                    let y = e.clientY - oy;
                    x = Math.max(0, Math.min(x, innerWidth - w));
                    y = Math.max(
                        menuBar.offsetHeight,
                        Math.min(y, innerHeight - h),
                    );
                    win.style.left = x + "px";
                    win.style.top = y + "px";
                };
                document.onmouseup = () => (drag = false);
            }
            function wireWindowControls() {
                document
                    .querySelectorAll("[data-close]")
                    .forEach(
                        (b) =>
                            (b.onclick = () =>
                                document
                                    .getElementById(b.dataset.close)
                                    .classList.add("hidden")),
                    );
            }
            makeDraggable(terminalWindow);
            makeDraggable(fileManagerWindow);
            wireWindowControls();

            /* ================= FILE SYSTEM WITH PERMISSIONS ================= */

            function folder(name, opts = {}, children = []) {
                return {
                    name,
                    hidden: opts.hidden || false,
                    restricted: opts.restricted || false,
                    folders: children,
                };
            }

            const FS = folder("root", {}, [
                folder("projects", {}, [folder("orion"), folder("archive")]),
                folder("documents", {}, [
                    folder("personal"),
                    folder("research"),
                ]),
                folder("system", {}, [
                    folder("logs"),
                    folder("memory"),
                    folder(".core", { hidden: true, restricted: true }, [
                        folder("artifact", { restricted: true }),
                    ]),
                ]),
            ]);

            let currentPath = [FS];
            let terminalPath = [FS];

            function pathString(path) {
                return (
                    "/" +
                    path
                        .slice(1)
                        .map((f) => f.name)
                        .join("/")
                );
            }
            function getFolder(path) {
                return path[path.length - 1];
            }

            /* ================= FILE MANAGER ================= */

            fileManagerIcon.ondblclick = () => {
                fileManagerWindow.classList.remove("hidden");
                renderFolder();
            };
            backBtn.onclick = () => {
                if (currentPath.length > 1) {
                    currentPath.pop();
                    renderFolder();
                }
            };

            function renderFolder() {
                const folder = getFolder(currentPath);
                fileGrid.innerHTML = "";
                pathBar.textContent = pathString(currentPath) || "/";

                folder.folders
                    .filter((f) => !f.hidden)
                    .forEach((f) => {
                        const item = document.createElement("div");
                        item.className = "file-item";
                        item.innerHTML = `<div style="font-size:32px">üìÅ</div><span>${f.name}</span>`;
                        item.onclick = () => {
                            if (f.restricted) return alert("permission denied");
                            currentPath.push(f);
                            renderFolder();
                        };
                        fileGrid.appendChild(item);
                    });
            }

            /* ================= TERMINAL ================= */

            const terminalIcon = document.getElementById("terminalIcon");
            const terminal = document.getElementById("terminal");
            let booted = false;

            terminalIcon.ondblclick = () => {
                terminalWindow.classList.remove("hidden");
                if (!booted) {
                    boot();
                    booted = true;
                } else printPrompt();
            };

            function printLine(t) {
                const d = document.createElement("div");
                d.textContent = t;
                terminal.appendChild(d);
                terminal.scrollTop = terminal.scrollHeight;
            }

            function printPrompt() {
                const w = document.createElement("div");
                w.className = "line";
                const p = document.createElement("span");
                p.className = "prompt";
                p.textContent = `observer@orionv.io:${pathString(terminalPath) || "/"}$`;
                const i = document.createElement("input");
                w.appendChild(p);
                w.appendChild(i);
                terminal.appendChild(w);
                i.focus();
                i.onkeydown = (e) => {
                    if (e.key === "Enter") {
                        handleCmd(i.value.trim());
                        i.disabled = true;
                    }
                };
            }

            function handleCmd(cmd) {
                let elevated = false;
                if (cmd.startsWith("sudo ")) {
                    elevated = true;
                    cmd = cmd.slice(5);
                }

                if (cmd === "exit") {
                    terminalWindow.classList.add("hidden");
                    return;
                }

                if (cmd === "pwd") {
                    printLine(pathString(terminalPath) || "/");
                } else if (cmd === "ls" || cmd === "ls -a") {
                    const showHidden = cmd === "ls -a";
                    getFolder(terminalPath)
                        .folders.filter((f) => showHidden || !f.hidden)
                        .forEach((f) => printLine(f.name));
                } else if (cmd.startsWith("cd ")) {
                    const target = cmd.slice(3).trim();

                    if (target === "..") {
                        if (terminalPath.length > 1) terminalPath.pop();
                    } else if (target === "/" || target === "root") {
                        terminalPath = [FS];
                    } else {
                        const folder = getFolder(terminalPath).folders.find(
                            (f) => f.name === target,
                        );
                        if (!folder) printLine("folder not found");
                        else if (folder.restricted && !elevated)
                            printLine("permission denied");
                        else terminalPath.push(folder);
                    }
                } else if (cmd === "help") {
                    printLine("pwd       show path");
                    printLine("ls        list folders");
                    printLine("ls -a     include hidden");
                    printLine("cd name   enter folder");
                    printLine("sudo cmd  elevated execution");
                    printLine("exit      close terminal");
                } else printLine("command not recognized");

                printPrompt();
            }

            async function boot() {
                printLine("initializing orionv.io perceptual layer...");
                printPrompt();
            }
        </script>
    </body>
</html>
